<div class="ticket" [formGroup]="ticketForm">
  <mat-spinner *ngIf="isLoading | async;else ticketTemplate" mode="indeterminate" color="primary">
  </mat-spinner>
  <ng-template #ticketTemplate>
  <div class="name">
    <mat-card class="name-card">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"><mat-icon class="project-icon">account_circle</mat-icon></div>
        <mat-card-subtitle class="project-subtitle" >
          Proj_name; Proj_code
        </mat-card-subtitle>
         <mat-card-title class="project-title">
           <mat-form-field >
             <input matInput formControlName="'issueName'" [readonly]="editName" required>
             <mat-icon class="edit-icon" matSuffix (click)="editName = !editName">mode_edit</mat-icon>
           </mat-form-field>
         </mat-card-title>
      </mat-card-header>
    </mat-card>
  </div>

  <div class="content">
    <div class="info">
      <div class="people">
        <mat-card>
          <mat-card-header>
            <mat-card-title>People</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <mat-card class="reporter-assignee">
              <mat-card-header>
                <div mat-card-avatar class="example-header-image"><mat-icon class="people-icon">account_circle</mat-icon></div>
                <mat-card-title>Reporter</mat-card-title>
                <mat-card-subtitle>Name</mat-card-subtitle>
              </mat-card-header>
            </mat-card>

          <mat-card class="reporter-assignee">
            <mat-card-header>
              <div mat-card-avatar><mat-icon class="people-icon">account_circle</mat-icon></div>
              <mat-card-title class="assignee-title">Assignee</mat-card-title>

              <mat-card-subtitle class="assignee-subtitle">
                  <mat-form-field style="width: 150px">
                    <input matInput [formControlName]="'assignee'" [readonly]="editAssignee" required>
                    <mat-icon matSuffix (click)="editAssignee = !editAssignee">mode_edit</mat-icon>

                    <!--<input matInput [value]="chosenAssignee" id="assigneeInput" required [formControl]="autoCompleteControl">-->
                    <!--<mat-option *ngFor="let item of assignees | async" [value]="item.login" (click)="chooseAssignee(item)">-->
                      <!--{{ item.fio}} <span class="assigneeListLogin">@{{item.login}}</span>-->
                    <!--</mat-option>-->
                  </mat-form-field>
              </mat-card-subtitle>

            </mat-card-header>
          </mat-card>
        </mat-card-content>
      </mat-card>
    </div>

    <mat-card class="dates">
      <mat-card-header>
        <mat-card-title>Dates</mat-card-title>
      </mat-card-header>
      <mat-card-content >
        <h4>Created: 4/4/2020</h4>
        <h4>Due:
          <mat-form-field class="due">
            <input matInput [matDatepicker]="picker" [formControlName]="'dueDate'" required>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </h4>
      </mat-card-content>
    </mat-card>

      <div class="buttons">
        <button mat-raised-button color="primary" (click)=onUpdateClick()>Update</button>
        <button mat-raised-button color="warn" (click)=onDeleteClick()>Delete</button>
      </div>
    </div>

    <div>
    <div class="type-priority-status">
      <mat-form-field class="size" >
        <mat-select placeholder="{{ticket.issueType}}" [formControlName]="'issueType'" required>
          <mat-option *ngFor="let type of types" [value]="type.type">
            {{type.title}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field class="size" >
        <mat-select placeholder="{{ticket.issuePriority}}" [formControlName]="'issuePriority'" required>
          <mat-option *ngFor="let priority of priorities" [value]="priority.type">
            {{priority.title}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field class="size" >
        <mat-select placeholder="{{ticket.issueStatus}}" [formControlName]="'issueStatus'" required>
          <mat-option *ngFor="let status of statuses" [value]="status.type">
            {{status.title}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <mat-form-field appearance="outline" class="description" [formGroup]="ticketForm">
      <mat-label>Description</mat-label>
      <textarea matInput [formControlName]="'issueDescription'"></textarea>
    </mat-form-field>

    <app-subtasks></app-subtasks>
  </div>
  <app-comments></app-comments>
  </div>
  </ng-template>
</div>
